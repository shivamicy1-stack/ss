<!DOCTYPE html>
<html>
<head>
    <title>Customer Reviews - RO Pure Jal</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        .star {
            font-size: 30px;
            color: lightgray;
            cursor: pointer;
        }
        .star.selected {
            color: gold;
        }
    </style>
</head>
<body>
    <h1>Customer Reviews</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        <ul class="messages">
        {% for category, message in messages %}
            <li class="{{ category }}">{{ message }}</li>
        {% endfor %}
        </ul>
    {% endif %}
    {% endwith %}

    <form method="POST" id="reviewForm">
        <label>Rate our service:</label><br>
        <div id="stars">
            <span class="star" data-value="1">&#9733;</span>
            <span class="star" data-value="2">&#9733;</span>
            <span class="star" data-value="3">&#9733;</span>
            <span class="star" data-value="4">&#9733;</span>
            <span class="star" data-value="5">&#9733;</span>
        </div>
        <input type="hidden" name="stars" id="starsInput" required>
        <br>

        <label>Your Review:</label><br>
        <textarea name="comment" rows="4" cols="40"></textarea><br><br>

        <input type="submit" value="Submit Review">
    </form>

    <h2>All Reviews</h2>
    {% for review in reviews %}
        <div class="review">
            <div>
                {% for i in range(review.stars) %}
                    <span style="color:gold;">&#9733;</span>
                {% endfor %}
                {% for i in range(5 - review.stars) %}
                    <span style="color:lightgray;">&#9733;</span>
                {% endfor %}
            </div>
            <p>{{ review.comment }}</p>
        </div>
        <hr>
    {% else %}
        <p>No reviews yet.</p>
    {% endfor %}

    <a href="{{ url_for('home') }}">Back to Home</a>
    {% include 'footer.html' %}

    <script>
        const stars = document.querySelectorAll('.star');
        const starsInput = document.getElementById('starsInput');
        stars.forEach(star => {
            star.addEventListener('click', () => {
                stars.forEach(s => s.classList.remove('selected'));
                star.classList.add('selected');
                starsInput.value = star.getAttribute('data-value');
            });
        });
    </script>
</body>
</html>
